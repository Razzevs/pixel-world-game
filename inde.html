<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¶–∏–≤–∏–ª–∏–∑–∞—Ü–∏—è: –í–µ–ª–∏–∫–∏–π –ü—É—Ç—å - –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò ===== */
        :root {
            --primary: #2a3b5c;
            --secondary: #4a6fa5;
            --accent: #ff6b35;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --dark: #1a1f38;
            --darker: #0f1429;
            --light: #ecf0f1;
            --border-radius: 15px;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ===== –ó–ê–ì–†–£–ó–û–ß–ù–´–ô –≠–ö–†–ê–ù ===== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--darker), var(--dark));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.8s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader-container {
            text-align: center;
            max-width: 600px;
            padding: 40px;
        }

        .loader-title {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--accent), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .loader-subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-bottom: 40px;
        }

        .loader-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .loader-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--secondary));
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
        }

        .loader-progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .loader-steps {
            text-align: left;
            margin-top: 30px;
        }

        .loader-step {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .loader-step.active {
            opacity: 1;
            background: rgba(74, 111, 165, 0.2);
            border-left: 4px solid var(--secondary);
        }

        .loader-step.completed {
            opacity: 0.8;
        }

        .step-icon {
            margin-right: 10px;
            color: var(--accent);
        }

        /* ===== –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° ===== */
        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }

        .game-container.visible {
            display: block;
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ===== –®–ê–ü–ö–ê ===== */
        .game-header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .game-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .game-title h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, var(--accent), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .game-info {
            display: flex;
            gap: 15px;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-icon {
            font-size: 1.2rem;
            color: var(--accent);
        }

        /* ===== –ö–ê–†–¢–ê –ú–ò–†–ê ===== */
        .world-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--accent);
        }

        .world-map {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            border-radius: 10px;
            height: 400px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .city {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .city:hover {
            transform: scale(1.2);
            z-index: 100;
        }

        .city.player {
            background: linear-gradient(135deg, var(--success), #27ae60);
            border: 3px solid white;
        }

        .city.enemy {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            border: 3px solid white;
        }

        .city.neutral {
            background: linear-gradient(135deg, var(--warning), #e67e22);
            border: 3px solid white;
        }

        .territory {
            position: absolute;
            border-radius: 50%;
            opacity: 0.3;
            z-index: 1;
        }

        .resource-node {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            animation: float 3s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* ===== –ü–ê–ù–ï–õ–¨ –†–ï–°–£–†–°–û–í ===== */
        .resources-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .resource-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            transition: var(--transition);
            border-left: 4px solid var(--accent);
        }

        .resource-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .resource-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .resource-icon {
            font-size: 1.8rem;
        }

        .resource-name {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .resource-value {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .resource-change {
            font-size: 0.9rem;
        }

        .change-positive {
            color: var(--success);
        }

        .change-negative {
            color: var(--danger);
        }

        /* ===== –ü–ê–ù–ï–õ–¨ –î–ï–ô–°–¢–í–ò–ô ===== */
        .actions-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .action-card {
            background: linear-gradient(135deg, rgba(74, 111, 165, 0.2), rgba(42, 59, 92, 0.2));
            border: 2px solid rgba(74, 111, 165, 0.3);
            border-radius: 12px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .action-card:hover:not(.disabled) {
            transform: translateY(-8px);
            border-color: var(--secondary);
            background: linear-gradient(135deg, rgba(74, 111, 165, 0.3), rgba(42, 59, 92, 0.3));
            box-shadow: 0 15px 30px rgba(74, 111, 165, 0.2);
        }

        .action-card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--accent);
        }

        .action-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .action-desc {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 15px;
        }

        .action-cost {
            font-size: 0.85rem;
            color: var(--warning);
            margin-top: 10px;
        }

        /* ===== –ü–ê–ù–ï–õ–¨ –†–ê–ó–í–ò–¢–ò–Ø ===== */
        .development-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tech-tree {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tech-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 20px;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .tech-card.unlocked {
            border-color: var(--success);
            background: rgba(46, 204, 113, 0.1);
        }

        .tech-card.available {
            border-color: var(--accent);
            background: rgba(255, 107, 53, 0.1);
            cursor: pointer;
        }

        .tech-card.available:hover {
            transform: translateY(-5px);
            background: rgba(255, 107, 53, 0.2);
        }

        .tech-card.locked {
            opacity: 0.6;
            filter: grayscale(0.5);
        }

        .tech-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--accent);
        }

        .tech-name {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .tech-desc {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 15px;
        }

        .tech-cost {
            font-size: 0.9rem;
            color: var(--warning);
        }

        /* ===== –ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–ê–Ø –ü–ê–ù–ï–õ–¨ ===== */
        .info-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .events-list {
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .event {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid var(--secondary);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .event.important {
            border-left-color: var(--accent);
            background: rgba(255, 107, 53, 0.1);
        }

        .event.success {
            border-left-color: var(--success);
            background: rgba(46, 204, 113, 0.1);
        }

        .event-time {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        /* ===== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ===== */
        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            max-width: 350px;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            border-left: 5px solid var(--accent);
        }

        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        .notification-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent);
        }

        /* ===== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal {
            background: linear-gradient(135deg, var(--dark), var(--primary));
            border-radius: var(--border-radius);
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow);
            border: 2px solid var(--secondary);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--accent);
        }

        /* ===== –¢–£–¢–û–†–ò–ê–õ ===== */
        .tutorial-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }

        .tutorial-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: var(--border-radius);
            padding: 40px;
            max-width: 500px;
            text-align: center;
            box-shadow: var(--shadow);
            border: 2px solid var(--accent);
        }

        .tutorial-icon {
            font-size: 4rem;
            color: var(--accent);
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .tutorial-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: white;
        }

        .tutorial-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .tutorial-button {
            background: var(--accent);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
        }

        .tutorial-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 107, 53, 0.3);
        }

        /* ===== –ü–†–û–ì–†–ï–°–° –ë–ê–†–´ ===== */
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--secondary));
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        /* ===== –ê–£–î–ò–û –ö–û–ù–¢–†–û–õ–´ ===== */
        .audio-controls {
            position: fixed;
            bottom: 30px;
            left: 30px;
            display: flex;
            gap: 15px;
            z-index: 100;
        }

        .audio-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid var(--secondary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .audio-button:hover {
            transform: scale(1.1);
            background: rgba(74, 111, 165, 0.3);
        }

        /* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ===== */
        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                gap: 20px;
            }
            
            .resources-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .actions-grid {
                grid-template-columns: 1fr;
            }
            
            .tech-tree {
                grid-template-columns: 1fr;
            }
            
            .loader-title {
                font-size: 2.5rem;
            }
            
            .game-title h1 {
                font-size: 2rem;
            }
        }

        /* ===== –ö–ù–û–ü–ö–ò ===== */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), #ff8c42);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 107, 53, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), #6b8cbc);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #27ae60);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            color: white;
        }

        /* ===== –ê–ù–ò–ú–ê–¶–ò–Ø –í–•–û–î–ê ===== */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .slide-up {
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <!-- –ó–ê–ì–†–£–ó–û–ß–ù–´–ô –≠–ö–†–ê–ù -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loader-container">
            <h1 class="loader-title">üèõÔ∏è –¶–ò–í–ò–õ–ò–ó–ê–¶–ò–Ø</h1>
            <p class="loader-subtitle">–í–ï–õ–ò–ö–ò–ô –ü–£–¢–¨ - –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</p>
            
            <div class="loader-bar">
                <div class="loader-progress" id="loaderProgress"></div>
            </div>
            
            <div class="loader-steps" id="loaderSteps">
                <!-- –®–∞–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
    </div>

    <!-- –¢–£–¢–û–†–ò–ê–õ -->
    <div class="tutorial-overlay" id="tutorialScreen">
        <div class="tutorial-card">
            <div class="tutorial-icon">üéÆ</div>
            <h2 class="tutorial-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!</h2>
            <p class="tutorial-text">
                –í–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–ª–∏–∫—É—é —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—é –æ—Ç –¥—Ä–µ–≤–Ω–∏—Ö –≤—Ä–µ–º–µ–Ω –¥–æ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π —ç—Ä—ã.<br><br>
                <strong>üéØ –¶–µ–ª—å –∏–≥—Ä—ã:</strong> –†–∞–∑–≤–∏–≤–∞–π—Ç–µ —Å–≤–æ—é —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—é, –∏—Å—Å–ª–µ–¥—É–π—Ç–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –∏ —Å—Ç–∞–Ω–æ–≤—å—Ç–µ—Å—å —Å–∞–º–æ–π –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –¥–µ—Ä–∂–∞–≤–æ–π –≤ –º–∏—Ä–µ!
            </p>
            <button class="tutorial-button" onclick="startTutorial()">–ü–†–û–ô–¢–ò –û–ë–£–ß–ï–ù–ò–ï</button>
        </div>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° -->
    <div class="game-container" id="gameContainer">
        <!-- –®–ê–ü–ö–ê –ò–ì–†–´ -->
        <header class="game-header">
            <div class="header-top">
                <div class="game-title">
                    <h1><i class="fas fa-crown"></i> –¶–ò–í–ò–õ–ò–ó–ê–¶–ò–Ø</h1>
                    <div class="version">–í–µ—Ä—Å–∏—è 3.0 | –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: Agafonov</div>
                </div>
                <div class="game-info">
                    <div class="info-card">
                        <i class="fas fa-clock info-icon"></i>
                        <div>
                            <div>–•–æ–¥ <span id="turnCounter">1</span></div>
                            <small>–≠–ø–æ—Ö–∞: <span id="eraDisplay" class="era">–î—Ä–µ–≤–Ω–∏–π –º–∏—Ä</span></small>
                        </div>
                    </div>
                    <div class="info-card">
                        <i class="fas fa-city info-icon"></i>
                        <div>
                            <div>–ì–æ—Ä–æ–¥–∞: <span id="cityCount">1</span></div>
                            <small>–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏: <span id="territoryCount">1/5</span></small>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="showTutorial()">
                        <i class="fas fa-question-circle"></i> –ü–æ–º–æ—â—å
                    </button>
                </div>
            </div>

            <!-- –ü–ê–ù–ï–õ–¨ –†–ï–°–£–†–°–û–í -->
            <div class="resources-grid" id="resourcesGrid">
                <!-- –†–µ—Å—É—Ä—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </header>

        <!-- –û–°–ù–û–í–ù–ê–Ø –ß–ê–°–¢–¨ -->
        <main>
            <!-- –ö–ê–†–¢–ê –ú–ò–†–ê -->
            <section class="world-section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-globe-americas"></i> –ö–ê–†–¢–ê –ú–ò–†–ê</h2>
                    <div>
                        <button class="btn btn-secondary" onclick="exploreNewTerritory()">
                            <i class="fas fa-search"></i> –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å
                        </button>
                        <button class="btn btn-primary" onclick="foundNewCity()" id="foundCityBtn">
                            <i class="fas fa-plus-circle"></i> –û—Å–Ω–æ–≤–∞—Ç—å –≥–æ—Ä–æ–¥
                        </button>
                    </div>
                </div>
                <div class="world-map" id="worldMap">
                    <!-- –ö–∞—Ä—Ç–∞ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ JS -->
                </div>
            </section>

            <!-- –ü–ê–ù–ï–õ–¨ –î–ï–ô–°–¢–í–ò–ô -->
            <section class="actions-panel">
                <h2 class="section-title"><i class="fas fa-tasks"></i> –î–ï–ô–°–¢–í–ò–Ø</h2>
                <div class="actions-grid" id="actionsGrid">
                    <!-- –î–µ–π—Å—Ç–≤–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </section>

            <!-- –ü–ê–ù–ï–õ–¨ –†–ê–ó–í–ò–¢–ò–Ø -->
            <section class="development-panel">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-flask"></i> –¢–ï–•–ù–û–õ–û–ì–ò–ò –ò –†–ê–ó–í–ò–¢–ò–ï</h2>
                    <div class="science-info">
                        <span><i class="fas fa-brain"></i> –ù–∞—É–∫–∞: <span id="scienceValue">100</span>/—Ö–æ–¥</span>
                    </div>
                </div>
                <div class="tech-tree" id="techTree">
                    <!-- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </section>

            <!-- –ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–ê–Ø –ü–ê–ù–ï–õ–¨ -->
            <section class="info-panel">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-history"></i> –°–û–ë–´–¢–ò–Ø –ò –°–¢–ê–¢–ò–°–¢–ò–ö–ê</h2>
                    <button class="btn btn-secondary" onclick="saveGame()">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É
                    </button>
                </div>
                <div class="events-list" id="eventsList">
                    <!-- –°–æ–±—ã—Ç–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </section>
        </main>
    </div>

    <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
    <div class="notification" id="notification">
        <div class="notification-icon">‚ú®</div>
        <div id="notificationText">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ì–û–†–û–î–ê -->
    <div class="modal-overlay" id="cityModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('cityModal')">√ó</button>
            <h2 class="modal-title" id="cityModalTitle">–ì–æ—Ä–æ–¥</h2>
            <div id="cityModalContent">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –¢–ï–•–ù–û–õ–û–ì–ò–ô -->
    <div class="modal-overlay" id="techModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('techModal')">√ó</button>
            <h2 class="modal-title"><i class="fas fa-flask"></i> –ò–°–°–õ–ï–î–û–í–ê–ù–ò–ï –¢–ï–•–ù–û–õ–û–ì–ò–ò</h2>
            <div id="techModalContent">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–û–ú–û–©–ò -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('helpModal')">√ó</button>
            <h2 class="modal-title"><i class="fas fa-question-circle"></i> –ö–ê–ö –ò–ì–†–ê–¢–¨?</h2>
            <div id="helpModalContent">
                <div style="line-height: 1.6; font-size: 1.1rem;">
                    <h3 style="color: var(--accent); margin: 20px 0 10px;">üéØ –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å</h3>
                    <p>–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≤–µ–ª–∏—á–∞–π—à—É—é —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—é –≤ –∏—Å—Ç–æ—Ä–∏–∏! –†–∞–∑–≤–∏–≤–∞–π—Ç–µ –≥–æ—Ä–æ–¥–∞, –∏—Å—Å–ª–µ–¥—É–π—Ç–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏.</p>
                    
                    <h3 style="color: var(--accent); margin: 20px 0 10px;">üìà –†–µ—Å—É—Ä—Å—ã</h3>
                    <ul style="padding-left: 20px; margin-bottom: 20px;">
                        <li><strong>üèõÔ∏è –ù–∞—Å–µ–ª–µ–Ω–∏–µ</strong> - –æ—Å–Ω–æ–≤–∞ –≤–∞—à–µ–π —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–∏</li>
                        <li><strong>üí∞ –ó–æ–ª–æ—Ç–æ</strong> - –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ —Ç–æ—Ä–≥–æ–≤–ª–∏</li>
                        <li><strong>‚öôÔ∏è –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</strong> - –¥–ª—è –ø–æ—Å—Ç—Ä–æ–π–∫–∏ –∑–¥–∞–Ω–∏–π</li>
                        <li><strong>üî¨ –ù–∞—É–∫–∞</strong> - –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π</li>
                        <li><strong>üçñ –ü–∏—â–∞</strong> - –¥–ª—è —Ä–æ—Å—Ç–∞ –Ω–∞—Å–µ–ª–µ–Ω–∏—è</li>
                        <li><strong>üé≠ –ö—É–ª—å—Ç—É—Ä–∞</strong> - –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –æ–±—â–µ—Å—Ç–≤–∞</li>
                    </ul>
                    
                    <h3 style="color: var(--accent); margin: 20px 0 10px;">üèóÔ∏è –î–µ–π—Å—Ç–≤–∏—è</h3>
                    <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –≤–∞—à–µ–π —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–∏. –ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–æ –ø—Ä–∏–Ω–æ—Å–∏—Ç –ø–æ–ª—å–∑—É.</p>
                    
                    <h3 style="color: var(--accent); margin: 20px 0 10px;">üß† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h3>
                    <p>–ò—Å—Å–ª–µ–¥—É–π—Ç–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∑–¥–∞–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è.</p>
                    
                    <h3 style="color: var(--accent); margin: 20px 0 10px;">üåç –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ</h3>
                    <p>–û—Å–Ω–æ–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –≥–æ—Ä–æ–¥–∞ –∏ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–π—Ç–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å —Å–≤–æ—é –º–æ—â—å.</p>
                </div>
                <div style="margin-top: 30px; text-align: center;">
                    <button class="btn btn-primary" onclick="closeModal('helpModal')">
                        <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ê–£–î–ò–û –ö–û–ù–¢–†–û–õ–´ -->
    <div class="audio-controls">
        <button class="audio-button" id="musicToggle" title="–ú—É–∑—ã–∫–∞">
            <i class="fas fa-music"></i>
        </button>
        <button class="audio-button" id="soundToggle" title="–ó–≤—É–∫–∏">
            <i class="fas fa-volume-up"></i>
        </button>
    </div>

    <!-- –ê–£–î–ò–û –≠–õ–ï–ú–ï–ù–¢–´ -->
    <audio id="backgroundMusic" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-epic-adventure-6.mp3" type="audio/mpeg">
    </audio>
    <audio id="clickSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" type="audio/mpeg">
    </audio>
    <audio id="successSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>
    <audio id="buildingSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-construction-tool-1383.mp3" type="audio/mpeg">
    </audio>

    <script>
        // ==================== –û–°–ù–û–í–ù–û–ô –ö–û–î –ò–ì–†–´ ====================
        class CivilizationGame {
            constructor() {
                // –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
                this.state = {
                    // –†–µ—Å—É—Ä—Å—ã
                    population: 1000,
                    gold: 500,
                    production: 100,
                    science: 50,
                    food: 200,
                    culture: 25,
                    happiness: 80,
                    
                    // –ü—Ä–æ–≥—Ä–µ—Å—Å
                    era: 0,
                    eraNames: ["–î—Ä–µ–≤–Ω–∏–π –º–∏—Ä", "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —ç–ø–æ—Ö–∞", "–°—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—å–µ", "–†–µ–Ω–µ—Å—Å–∞–Ω—Å", "–ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω–∞—è —ç—Ä–∞", "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å", "–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —ç—Ä–∞"],
                    turn: 1,
                    
                    // –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –∏ –≥–æ—Ä–æ–¥–∞
                    cities: [],
                    territories: [],
                    maxCities: 3,
                    maxTerritories: 5,
                    
                    // –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
                    researchedTechs: [],
                    currentResearch: null,
                    researchProgress: 0,
                    
                    // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                    achievements: [],
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                    musicEnabled: true,
                    soundEnabled: true,
                    tutorialCompleted: false
                };
                
                // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
                this.config = {
                    resourceIcons: {
                        population: 'üèõÔ∏è',
                        gold: 'üí∞',
                        production: '‚öôÔ∏è',
                        science: 'üî¨',
                        food: 'üçñ',
                        culture: 'üé≠',
                        happiness: 'üòä'
                    },
                    
                    actions: [
                        {
                            id: 'build_infrastructure',
                            name: '–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É',
                            icon: 'üèóÔ∏è',
                            description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –∏ —Å—á–∞—Å—Ç—å–µ',
                            cost: { gold: 200, production: 100 },
                            effect: { production: 50, happiness: 5 },
                            cooldown: 5
                        },
                        {
                            id: 'research_project',
                            name: '–ù–∞—É—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç',
                            icon: 'üß™',
                            description: '–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –Ω–∞—É–∫–∏',
                            cost: { gold: 150, science: 50 },
                            effect: { science: 100 },
                            cooldown: 3
                        },
                        {
                            id: 'cultural_festival',
                            name: '–ö—É–ª—å—Ç—É—Ä–Ω—ã–π —Ñ–µ—Å—Ç–∏–≤–∞–ª—å',
                            icon: 'üé™',
                            description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫—É–ª—å—Ç—É—Ä—É –∏ —Å—á–∞—Å—Ç—å–µ',
                            cost: { gold: 100, food: 50 },
                            effect: { culture: 75, happiness: 10 },
                            cooldown: 4
                        },
                        {
                            id: 'agricultural_revolution',
                            name: '–°–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–≤–æ–ª—é—Ü–∏—è',
                            icon: 'üåæ',
                            description: '–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –ø–∏—â–∏',
                            cost: { production: 150, science: 30 },
                            effect: { food: 300, population: 100 },
                            cooldown: 6
                        },
                        {
                            id: 'trade_expedition',
                            name: '–¢–æ—Ä–≥–æ–≤–∞—è —ç–∫—Å–ø–µ–¥–∏—Ü–∏—è',
                            icon: 'üö¢',
                            description: '–ë–æ–ª—å—à–æ–π –ø—Ä–∏—Ä–æ—Å—Ç –∑–æ–ª–æ—Ç–∞',
                            cost: { gold: 50, food: 100 },
                            effect: { gold: 400 },
                            cooldown: 4
                        },
                        {
                            id: 'education_reform',
                            name: '–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Ä–µ—Ñ–æ—Ä–º–∞',
                            icon: 'üìö',
                            description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –Ω–∞—É–∫—É –∏ –∫—É–ª—å—Ç—É—Ä—É',
                            cost: { gold: 300, production: 80 },
                            effect: { science: 80, culture: 40 },
                            cooldown: 5
                        }
                    ],
                    
                    technologies: [
                        {
                            id: 'agriculture',
                            name: '–ó–µ–º–ª–µ–¥–µ–ª–∏–µ',
                            icon: 'üåæ',
                            cost: 100,
                            era: 0,
                            description: '–ü–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ø–∏—â—É',
                            effect: { food: 1.5 },
                            unlocked: true
                        },
                        {
                            id: 'writing',
                            name: '–ü–∏—Å—å–º–µ–Ω–Ω–æ—Å—Ç—å',
                            icon: 'üìú',
                            cost: 200,
                            era: 0,
                            description: '–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–∞—É—á–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è',
                            effect: { science: 1.3 },
                            unlocked: false
                        },
                        {
                            id: 'masonry',
                            name: '–ö–∞–º–µ–Ω–Ω–∞—è –∫–ª–∞–¥–∫–∞',
                            icon: 'üß±',
                            cost: 150,
                            era: 0,
                            description: '–£–ª—É—á—à–∞–µ—Ç —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∑–¥–∞–Ω–∏–π',
                            effect: { production: 1.4 },
                            unlocked: false
                        },
                        {
                            id: 'metalworking',
                            name: '–ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è',
                            icon: '‚öíÔ∏è',
                            cost: 300,
                            era: 1,
                            description: '–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏',
                            effect: { maxCities: 1 },
                            unlocked: false
                        },
                        {
                            id: 'mathematics',
                            name: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
                            icon: 'üìê',
                            cost: 400,
                            era: 1,
                            description: '–£—Å–∫–æ—Ä—è–µ—Ç –Ω–∞—É—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å',
                            effect: { science: 1.5 },
                            unlocked: false
                        },
                        {
                            id: 'engineering',
                            name: '–ò–Ω–∂–µ–Ω–µ—Ä–∏—è',
                            icon: '‚öôÔ∏è',
                            cost: 600,
                            era: 2,
                            description: '–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å —á—É–¥–µ—Å–∞',
                            effect: { production: 1.6 },
                            unlocked: false
                        }
                    ],
                    
                    cityBuildings: [
                        { id: 'granary', name: '–ê–º–±–∞—Ä', icon: 'üèöÔ∏è', cost: { gold: 100, production: 50 }, effect: { food: 50 } },
                        { id: 'library', name: '–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞', icon: 'üìö', cost: { gold: 200, production: 80 }, effect: { science: 30 } },
                        { id: 'market', name: '–†—ã–Ω–æ–∫', icon: 'üè™', cost: { gold: 150, production: 60 }, effect: { gold: 40 } },
                        { id: 'temple', name: '–•—Ä–∞–º', icon: 'üõï', cost: { gold: 250, production: 100 }, effect: { culture: 25, happiness: 10 } }
                    ]
                };
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
                this.init();
            }
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
            async init() {
                console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã...');
                
                // –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω
                await this.showLoadingScreen();
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                this.loadGame();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                this.initUI();
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
                this.setupEventListeners();
                
                // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
                this.startGameLoop();
                
                // –ü–æ–∫–∞–∑ —Ç—É—Ç–æ—Ä–∏–∞–ª–∞
                if (!this.state.tutorialCompleted) {
                    this.showTutorial();
                }
            }
            
            // –ó–ê–ì–†–£–ó–û–ß–ù–´–ô –≠–ö–†–ê–ù
            async showLoadingScreen() {
                const steps = [
                    { text: '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞...', duration: 800 },
                    { text: '–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...', duration: 1000 },
                    { text: '–°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –º–∏—Ä–∞...', duration: 1200 },
                    { text: '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º...', duration: 900 },
                    { text: '–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É!', duration: 700 }
                ];
                
                const loaderSteps = document.getElementById('loaderSteps');
                const progressBar = document.getElementById('loaderProgress');
                
                for (let i = 0; i < steps.length; i++) {
                    const step = steps[i];
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —à–∞–≥
                    const stepElement = document.createElement('div');
                    stepElement.className = 'loader-step';
                    stepElement.innerHTML = `
                        <i class="fas fa-spinner fa-spin step-icon"></i>
                        ${step.text}
                    `;
                    loaderSteps.appendChild(stepElement);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                    const progress = ((i + 1) / steps.length) * 100;
                    progressBar.style.width = `${progress}%`;
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è —à–∞–≥–∞
                    stepElement.classList.add('active');
                    
                    // –ñ–¥–µ–º –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º
                    await new Promise(resolve => setTimeout(resolve, step.duration));
                    
                    // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π
                    stepElement.classList.remove('active');
                    stepElement.classList.add('completed');
                    stepElement.querySelector('.fa-spinner').className = 'fas fa-check step-icon';
                }
                
                // –ó–∞–≤–µ—Ä—à–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                await new Promise(resolve => setTimeout(resolve, 1000));
                document.getElementById('loadingScreen').classList.add('hidden');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                setTimeout(() => {
                    document.getElementById('gameContainer').classList.add('visible');
                    this.playSound('success');
                    this.showNotification('üéÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!');
                }, 500);
            }
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–ê
            initUI() {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
                this.initResources();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
                this.initMap();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π
                this.initActions();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
                this.initTechnologies();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
                this.initEvents();
                
                // –ü–µ—Ä–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
                this.addEvent('üèõÔ∏è –í–∞—à–∞ —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–≤–æ–π –≤–µ–ª–∏–∫–∏–π –ø—É—Ç—å!', 'success');
                this.addEvent('üëë –í—ã - –ø—Ä–∞–≤–∏—Ç–µ–ª—å –Ω–æ–≤–æ–≥–æ –Ω–∞—Ä–æ–¥–∞. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–ª–∏–∫—É—é –∏–º–ø–µ—Ä–∏—é.', 'normal');
                this.addEvent('üåæ –ù–∞—á–Ω–∏—Ç–µ —Å —Ä–∞–∑–≤–∏—Ç–∏—è —Å–µ–ª—å—Å–∫–æ–≥–æ —Ö–æ–∑—è–π—Å—Ç–≤–∞, —á—Ç–æ–±—ã –ø—Ä–æ–∫–æ—Ä–º–∏—Ç—å –Ω–∞—Å–µ–ª–µ–Ω–∏–µ.', 'normal');
            }
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –†–ï–°–£–†–°–û–í
            initResources() {
                const resourcesGrid = document.getElementById('resourcesGrid');
                const resources = [
                    { id: 'population', name: '–ù–∞—Å–µ–ª–µ–Ω–∏–µ', value: this.state.population },
                    { id: 'gold', name: '–ó–æ–ª–æ—Ç–æ', value: this.state.gold },
                    { id: 'production', name: '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ', value: this.state.production },
                    { id: 'science', name: '–ù–∞—É–∫–∞', value: this.state.science },
                    { id: 'food', name: '–ü–∏—â–∞', value: this.state.food },
                    { id: 'culture', name: '–ö—É–ª—å—Ç—É—Ä–∞', value: this.state.culture },
                    { id: 'happiness', name: '–°—á–∞—Å—Ç—å–µ', value: this.state.happiness }
                ];
                
                resourcesGrid.innerHTML = resources.map(res => `
                    <div class="resource-card">
                        <div class="resource-header">
                            <span class="resource-name">${res.name}</span>
                            <span class="resource-icon">${this.config.resourceIcons[res.id]}</span>
                        </div>
                        <div class="resource-value" id="${res.id}Value">${this.formatNumber(res.value)}</div>
                        <div class="resource-change">
                            <span id="${res.id}Change">+${this.getResourcePerTurn(res.id)}/—Ö–æ–¥</span>
                        </div>
                        ${res.id === 'happiness' ? `
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${res.value}%"></div>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ê–†–¢–´
            initMap() {
                const worldMap = document.getElementById('worldMap');
                worldMap.innerHTML = '';
                
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é –∏–≥—Ä–æ–∫–∞ (—Ü–µ–Ω—Ç—Ä)
                const playerCity = this.createCityElement('–°—Ç–æ–ª–∏—Ü–∞', 50, 50, 'player');
                worldMap.appendChild(playerCity);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≥–æ—Ä–æ–¥
                this.state.cities.push({
                    id: 0,
                    name: '–°—Ç–æ–ª–∏—Ü–∞',
                    x: 50,
                    y: 50,
                    type: 'capital',
                    level: 1,
                    buildings: []
                });
                
                // –°–æ–∑–¥–∞–µ–º –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏
                for (let i = 0; i < 8; i++) {
                    const x = 20 + Math.random() * 60;
                    const y = 20 + Math.random() * 60;
                    
                    const city = this.createCityElement(`–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è ${i + 1}`, x, y, 'neutral');
                    worldMap.appendChild(city);
                    
                    this.state.territories.push({
                        id: i,
                        name: `–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è ${i + 1}`,
                        x: x,
                        y: y,
                        type: 'neutral',
                        resource: this.getRandomResource()
                    });
                }
                
                // –°–æ–∑–¥–∞–µ–º –≤—Ä–∞–∂–µ—Å–∫–∏–µ –≥–æ—Ä–æ–¥–∞
                for (let i = 0; i < 3; i++) {
                    const x = 10 + Math.random() * 80;
                    const y = 10 + Math.random() * 80;
                    
                    const city = this.createCityElement(`–í—Ä–∞–∂–¥–µ–±–Ω—ã–π –≥–æ—Ä–æ–¥ ${i + 1}`, x, y, 'enemy');
                    worldMap.appendChild(city);
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ—Å—É—Ä—Å–Ω—ã–µ —É–∑–ª—ã
                for (let i = 0; i < 12; i++) {
                    const resourceNode = document.createElement('div');
                    resourceNode.className = 'resource-node';
                    resourceNode.style.left = `${Math.random() * 90}%`;
                    resourceNode.style.top = `${Math.random() * 90}%`;
                    
                    const resources = ['üí∞', 'üçñ', '‚öôÔ∏è', 'üî¨'];
                    resourceNode.innerHTML = resources[Math.floor(Math.random() * resources.length)];
                    
                    worldMap.appendChild(resourceNode);
                }
            }
            
            // –°–û–ó–î–ê–ù–ò–ï –≠–õ–ï–ú–ï–ù–¢–ê –ì–û–†–û–î–ê
            createCityElement(name, x, y, type) {
                const city = document.createElement('div');
                city.className = `city ${type}`;
                city.style.left = `${x}%`;
                city.style.top = `${y}%`;
                city.title = name;
                
                const icons = {
                    'player': 'üèõÔ∏è',
                    'enemy': 'üè∞',
                    'neutral': 'üèïÔ∏è'
                };
                
                city.innerHTML = icons[type];
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
                city.addEventListener('click', () => this.selectCity(name, type));
                
                return city;
            }
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –î–ï–ô–°–¢–í–ò–ô
            initActions() {
                const actionsGrid = document.getElementById('actionsGrid');
                actionsGrid.innerHTML = '';
                
                this.config.actions.forEach(action => {
                    const canAfford = this.canAfford(action.cost);
                    const actionCard = document.createElement('div');
                    actionCard.className = `action-card ${canAfford ? '' : 'disabled'}`;
                    actionCard.dataset.action = action.id;
                    
                    actionCard.innerHTML = `
                        <div class="action-icon">${action.icon}</div>
                        <div class="action-title">${action.name}</div>
                        <div class="action-desc">${action.description}</div>
                        <div class="action-cost">
                            –°—Ç–æ–∏–º–æ—Å—Ç—å: ${Object.entries(action.cost).map(([res, val]) => 
                                `${val} ${this.config.resourceIcons[res] || res}`
                            ).join(', ')}
                        </div>
                    `;
                    
                    if (canAfford) {
                        actionCard.addEventListener('click', () => this.performAction(action));
                    }
                    
                    actionsGrid.appendChild(actionCard);
                });
            }
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –¢–ï–•–ù–û–õ–û–ì–ò–ô
            initTechnologies() {
                const techTree = document.getElementById('techTree');
                techTree.innerHTML = '';
                
                this.config.technologies.forEach(tech => {
                    const isResearched = this.state.researchedTechs.includes(tech.id);
                    const canResearch = tech.cost <= this.state.science && !isResearched && 
                                      (tech.unlocked || this.state.era >= tech.era);
                    
                    const techCard = document.createElement('div');
                    techCard.className = `tech-card ${isResearched ? 'unlocked' : canResearch ? 'available' : 'locked'}`;
                    techCard.dataset.tech = tech.id;
                    
                    techCard.innerHTML = `
                        <div class="tech-icon">${tech.icon}</div>
                        <div class="tech-name">${tech.name}</div>
                        <div class="tech-desc">${tech.description}</div>
                        <div class="tech-cost">
                            ${isResearched ? '‚úÖ –ò–∑—É—á–µ–Ω–∞' : `${tech.cost} –Ω–∞—É–∫–∏`}
                        </div>
                    `;
                    
                    if (canResearch) {
                        techCard.addEventListener('click', () => this.researchTechnology(tech));
                    }
                    
                    techTree.appendChild(techCard);
                });
            }
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–û–ë–´–¢–ò–ô
            initEvents() {
                // –ü–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, —Å–æ–±—ã—Ç–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
            }
            
            // –í–´–ü–û–õ–ù–ï–ù–ò–ï –î–ï–ô–°–¢–í–ò–Ø
            performAction(action) {
                if (!this.canAfford(action.cost)) {
                    this.showNotification('‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤!');
                    this.playSound('error');
                    return;
                }
                
                // –°–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
                Object.entries(action.cost).forEach(([resource, amount]) => {
                    this.state[resource] -= amount;
                });
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
                Object.entries(action.effect).forEach(([resource, amount]) => {
                    if (typeof amount === 'number') {
                        this.state[resource] += amount;
                    }
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ
                this.addEvent(`‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: ${action.name}`, 'success');
                this.playSound('success');
                this.showNotification(`üéØ ${action.name} –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!`);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                this.updateUI();
                this.initActions();
            }
            
            // –ò–°–°–õ–ï–î–û–í–ê–ù–ò–ï –¢–ï–•–ù–û–õ–û–ì–ò–ò
            researchTechnology(tech) {
                if (this.state.science < tech.cost) {
                    this.showNotification('‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞—É–∫–∏ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è!');
                    this.playSound('error');
                    return;
                }
                
                if (this.state.researchedTechs.includes(tech.id)) {
                    this.showNotification('‚ö†Ô∏è –≠—Ç–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è —É–∂–µ –∏–∑—É—á–µ–Ω–∞!');
                    return;
                }
                
                // –°–ø–∏—Å—ã–≤–∞–µ–º –Ω–∞—É–∫—É
                this.state.science -= tech.cost;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–∑—É—á–µ–Ω–Ω—ã–µ
                this.state.researchedTechs.push(tech.id);
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
                if (tech.effect) {
                    Object.entries(tech.effect).forEach(([key, value]) => {
                        if (key === 'maxCities') {
                            this.state.maxCities += value;
                        } else if (typeof this.state[key] === 'number') {
                            this.state[key] *= value;
                        }
                    });
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ
                this.addEvent(`üß† –ò–∑—É—á–µ–Ω–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è: ${tech.name}`, 'success');
                this.playSound('success');
                this.showNotification(`üéâ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è "${tech.name}" –∏–∑—É—á–µ–Ω–∞!`);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                this.updateUI();
                this.initTechnologies();
            }
            
            // –û–°–ù–û–í–ê–ù–ò–ï –ù–û–í–û–ì–û –ì–û–†–û–î–ê
            foundNewCity() {
                if (this.state.cities.length >= this.state.maxCities) {
                    this.showNotification('‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –≥–æ—Ä–æ–¥–æ–≤! –ò–∑—É—á–∏—Ç–µ –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.');
                    this.playSound('error');
                    return;
                }
                
                if (this.state.gold < 500 || this.state.population < 500) {
                    this.showNotification('‚ö†Ô∏è –î–ª—è –æ—Å–Ω–æ–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞ –Ω—É–∂–Ω–æ 500 –∑–æ–ª–æ—Ç–∞ –∏ 500 –Ω–∞—Å–µ–ª–µ–Ω–∏—è!');
                    this.playSound('error');
                    return;
                }
                
                // –°–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
                this.state.gold -= 500;
                this.state.population -= 500;
                
                // –°–æ–∑–¥–∞–µ–º –≥–æ—Ä–æ–¥
                const cityId = this.state.cities.length;
                const cityName = `–ì–æ—Ä–æ–¥ ${String.fromCharCode(65 + cityId)}`; // A, B, C...
                const x = 20 + Math.random() * 60;
                const y = 20 + Math.random() * 60;
                
                this.state.cities.push({
                    id: cityId,
                    name: cityName,
                    x: x,
                    y: y,
                    type: 'city',
                    level: 1,
                    buildings: []
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –∫–∞—Ä—Ç—É
                const worldMap = document.getElementById('worldMap');
                const cityElement = this.createCityElement(cityName, x, y, 'player');
                worldMap.appendChild(cityElement);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –≥–æ—Ä–æ–¥–æ–≤
                document.getElementById('cityCount').textContent = this.state.cities.length;
                document.getElementById('territoryCount').textContent = `${this.state.territories.length + 1}/${this.state.maxTerritories}`;
                
                // –°–æ–±—ã—Ç–∏–µ
                this.addEvent(`üèôÔ∏è –û—Å–Ω–æ–≤–∞–Ω –Ω–æ–≤—ã–π –≥–æ—Ä–æ–¥: ${cityName}!`, 'success');
                this.playSound('buildingSound');
                this.showNotification(`üéä –ù–æ–≤—ã–π –≥–æ—Ä–æ–¥ ${cityName} –æ—Å–Ω–æ–≤–∞–Ω!`);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                this.updateUI();
            }
            
            // –ò–°–°–õ–ï–î–û–í–ê–ù–ò–ï –¢–ï–†–†–ò–¢–û–†–ò–ò
            exploreNewTerritory() {
                if (this.state.territories.length >= this.state.maxTerritories) {
                    this.showNotification('‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π!');
                    this.playSound('error');
                    return;
                }
                
                if (this.state.gold < 200) {
                    this.showNotification('‚ö†Ô∏è –î–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ 200 –∑–æ–ª–æ—Ç–∞!');
                    this.playSound('error');
                    return;
                }
                
                // –°–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
                this.state.gold -= 200;
                
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é
                const territoryId = this.state.territories.length;
                const territoryName = `–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è ${territoryId + 1}`;
                const x = 10 + Math.random() * 80;
                const y = 10 + Math.random() * 80;
                const resource = this.getRandomResource();
                
                this.state.territories.push({
                    id: territoryId,
                    name: territoryName,
                    x: x,
                    y: y,
                    type: 'neutral',
                    resource: resource
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –∫–∞—Ä—Ç—É
                const worldMap = document.getElementById('worldMap');
                const territoryElement = this.createCityElement(territoryName, x, y, 'neutral');
                worldMap.appendChild(territoryElement);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
                document.getElementById('territoryCount').textContent = `${this.state.territories.length + 1}/${this.state.maxTerritories}`;
                
                // –°–æ–±—ã—Ç–∏–µ
                this.addEvent(`üó∫Ô∏è –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∞ –Ω–æ–≤–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è! –†–µ—Å—É—Ä—Å: ${this.getResourceName(resource)}`, 'success');
                this.playSound('success');
                this.showNotification('üìç –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è!');
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                this.updateUI();
            }
            
            // –í–´–ë–û–† –ì–û–†–û–î–ê
            selectCity(name, type) {
                if (type === 'player') {
                    this.showCityModal(name);
                } else if (type === 'neutral') {
                    this.showNotification(`üåø ${name} - –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è. –ú–æ–∂–Ω–æ –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –∑–∞ 300 –∑–æ–ª–æ—Ç–∞.`);
                } else {
                    this.showNotification(`‚öîÔ∏è ${name} - –≤—Ä–∞–∂–µ—Å–∫–∏–π –≥–æ—Ä–æ–¥. –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—Ä–º–∏—è –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞.`);
                }
                this.playSound('click');
            }
            
            // –ü–û–ö–ê–ó –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –ì–û–†–û–î–ê
            showCityModal(cityName) {
                const modal = document.getElementById('cityModal');
                const title = document.getElementById('cityModalTitle');
                const content = document.getElementById('cityModalContent');
                
                title.textContent = cityName;
                
                content.innerHTML = `
                    <div style="margin-bottom: 30px;">
                        <h3 style="color: var(--accent); margin-bottom: 15px;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Ä–æ–¥–∞</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                                <div style="font-size: 0.9rem; opacity: 0.8;">–£—Ä–æ–≤–µ–Ω—å</div>
                                <div style="font-size: 2rem; font-weight: bold;">1</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                                <div style="font-size: 0.9rem; opacity: 0.8;">–ù–∞—Å–µ–ª–µ–Ω–∏–µ</div>
                                <div style="font-size: 2rem; font-weight: bold;">${this.formatNumber(1000)}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="color: var(--accent); margin-bottom: 15px;">üèóÔ∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <div style="display: grid; gap: 15px;">
                            ${this.config.cityBuildings.map(building => `
                                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; display: flex; align-items: center; gap: 15px; cursor: pointer; transition: var(--transition);"
                                     onclick="game.buildBuilding('${building.id}')">
                                    <div style="font-size: 2rem;">${building.icon}</div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: bold;">${building.name}</div>
                                        <div style="font-size: 0.9rem; opacity: 0.8;">${Object.entries(building.cost).map(([res, val]) => 
                                            `${val} ${this.config.resourceIcons[res] || res}`
                                        ).join(', ')}</div>
                                    </div>
                                    <button class="btn btn-primary" style="padding: 8px 20px;">
                                        –ü–æ—Å—Ç—Ä–æ–∏—Ç—å
                                    </button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                modal.classList.add('active');
            }
            
            // –ü–û–°–¢–†–û–ô–ö–ê –ó–î–ê–ù–ò–Ø
            buildBuilding(buildingId) {
                const building = this.config.cityBuildings.find(b => b.id === buildingId);
                if (!building) return;
                
                if (!this.canAfford(building.cost)) {
                    this.showNotification('‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–π–∫–∏!');
                    this.playSound('error');
                    return;
                }
                
                // –°–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
                Object.entries(building.cost).forEach(([resource, amount]) => {
                    this.state[resource] -= amount;
                });
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
                Object.entries(building.effect).forEach(([resource, amount]) => {
                    this.state[resource] += amount;
                });
                
                this.addEvent(`üèóÔ∏è –ü–æ—Å—Ç—Ä–æ–µ–Ω–æ: ${building.name}`, 'success');
                this.playSound('buildingSound');
                this.showNotification(`‚úÖ ${building.name} –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ!`);
                
                this.updateUI();
                this.closeModal('cityModal');
            }
            
            // –ò–ì–†–û–í–û–ô –¶–ò–ö–õ
            startGameLoop() {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
                setInterval(() => {
                    this.updateResources();
                    this.updateUI();
                }, 10000);
                
                // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
                setInterval(() => {
                    this.saveGame();
                    this.addEvent('üíæ –ò–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞', 'normal');
                }, 30000);
                
                // –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∫–∞–∂–¥—ã–µ 20 —Å–µ–∫—É–Ω–¥
                setInterval(() => {
                    this.randomEvent();
                }, 20000);
            }
            
            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –†–ï–°–£–†–°–û–í
            updateResources() {
                // –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏—Ä–æ—Å—Ç
                this.state.population = Math.floor(this.state.population * 1.02);
                this.state.gold = Math.floor(this.state.gold * 1.05);
                this.state.production = Math.floor(this.state.production * 1.03);
                this.state.science = Math.floor(this.state.science * 1.04);
                this.state.food = Math.floor(this.state.food * 1.03);
                this.state.culture = Math.floor(this.state.culture * 1.02);
                
                // –ü—Ä–æ–≥—Ä–µ—Å—Å —ç—Ä—ã
                if (this.state.culture >= 1000 && this.state.era < this.state.eraNames.length - 1) {
                    this.state.era++;
                    this.state.culture = 0;
                    
                    this.addEvent(`üéâ –ù–û–í–ê–Ø –≠–ü–û–•–ê: ${this.state.eraNames[this.state.era]}!`, 'success');
                    this.playSound('success');
                    this.showNotification(`üèõÔ∏è –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —ç–ø–æ—Ö–∏ ${this.state.eraNames[this.state.era]}!`);
                }
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ö–æ–¥
                this.state.turn++;
                document.getElementById('turnCounter').textContent = this.state.turn;
                document.getElementById('eraDisplay').textContent = this.state.eraNames[this.state.era];
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–∞—Å—Ç—å—è
                this.updateHappiness();
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
                this.initActions();
            }
            
            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–ß–ê–°–¢–¨–Ø
            updateHappiness() {
                // –ë–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ —Å—á–∞—Å—Ç—å—è
                const baseHappiness = 50;
                const foodBonus = this.state.food > this.state.population ? 10 : -10;
                const goldBonus = this.state.gold > 1000 ? 10 : 0;
                const cultureBonus = Math.min(20, this.state.culture / 50);
                
                this.state.happiness = Math.max(0, Math.min(100, 
                    baseHappiness + foodBonus + goldBonus + cultureBonus
                ));
            }
            
            // –°–õ–£–ß–ê–ô–ù–û–ï –°–û–ë–´–¢–ò–ï
            randomEvent() {
                const events = [
                    {
                        text: 'üåæ –û—Ç–ª–∏—á–Ω—ã–π —É—Ä–æ–∂–∞–π! –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –ø–∏—â–∏ —É–≤–µ–ª–∏—á–µ–Ω–æ.',
                        type: 'success',
                        effect: () => {
                            this.state.food = Math.floor(this.state.food * 1.3);
                            this.showNotification('üåΩ –ë–æ–≥–∞—Ç—ã–π —É—Ä–æ–∂–∞–π! –ü–∏—â–∞ +30%');
                        }
                    },
                    {
                        text: 'üí∞ –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –º–µ—Å—Ç–æ—Ä–æ–∂–¥–µ–Ω–∏–µ –∑–æ–ª–æ—Ç–∞!',
                        type: 'success',
                        effect: () => {
                            this.state.gold = Math.floor(this.state.gold * 1.5);
                            this.showNotification('üíé –ù–∞–π–¥–µ–Ω–æ –∑–æ–ª–æ—Ç–æ! +50% –∫ –∑–æ–ª–æ—Ç—É');
                        }
                    },
                    {
                        text: 'üî¨ –ù–∞—É—á–Ω—ã–π –ø—Ä–æ—Ä—ã–≤! –°–∫–æ—Ä–æ—Å—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π —É–≤–µ–ª–∏—á–µ–Ω–∞.',
                        type: 'success',
                        effect: () => {
                            this.state.science = Math.floor(this.state.science * 1.4);
                            this.showNotification('üß™ –ù–∞—É—á–Ω—ã–π –ø—Ä–æ—Ä—ã–≤! –ù–∞—É–∫–∞ +40%');
                        }
                    },
                    {
                        text: '‚öîÔ∏è –í—Ä–∞–∂–µ—Å–∫–∏–µ –ø–ª–µ–º–µ–Ω–∞ –∞—Ç–∞–∫—É—é—Ç –æ–∫—Ä–∞–∏–Ω—ã!',
                        type: 'important',
                        effect: () => {
                            this.state.population = Math.floor(this.state.population * 0.9);
                            this.state.happiness -= 10;
                            this.showNotification('üõ°Ô∏è –í—Ä–∞–∂–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞! –ù–∞—Å–µ–ª–µ–Ω–∏–µ -10%');
                        }
                    },
                    {
                        text: 'üé≠ –ö—É–ª—å—Ç—É—Ä–Ω—ã–π —Ñ–µ—Å—Ç–∏–≤–∞–ª—å –æ–±—ä–µ–¥–∏–Ω–∏–ª –Ω–∞—Ä–æ–¥!',
                        type: 'success',
                        effect: () => {
                            this.state.culture = Math.floor(this.state.culture * 1.6);
                            this.state.happiness += 15;
                            this.showNotification('üé™ –§–µ—Å—Ç–∏–≤–∞–ª—å –∫—É–ª—å—Ç—É—Ä—ã! –°—á–∞—Å—Ç—å–µ +15');
                        }
                    }
                ];
                
                if (Math.random() < 0.3) { // 30% —à–∞–Ω—Å
                    const event = events[Math.floor(Math.random() * events.length)];
                    event.effect();
                    this.addEvent(event.text, event.type);
                }
            }
            
            // –î–û–ë–ê–í–õ–ï–ù–ò–ï –°–û–ë–´–¢–ò–Ø
            addEvent(text, type = 'normal') {
                const eventsList = document.getElementById('eventsList');
                const eventElement = document.createElement('div');
                eventElement.className = `event ${type}`;
                
                const time = new Date().toLocaleTimeString('ru-RU', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                eventElement.innerHTML = `
                    <div class="event-time">–•–æ–¥ ${this.state.turn} | ${time}</div>
                    <div>${text}</div>
                `;
                
                eventsList.prepend(eventElement);
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π
                if (eventsList.children.length > 10) {
                    eventsList.removeChild(eventsList.lastChild);
                }
            }
            
            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê
            updateUI() {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
                document.getElementById('populationValue').textContent = this.formatNumber(this.state.population);
                document.getElementById('goldValue').textContent = this.formatNumber(this.state.gold);
                document.getElementById('productionValue').textContent = this.formatNumber(this.state.production);
                document.getElementById('scienceValue').textContent = this.formatNumber(this.state.science);
                document.getElementById('foodValue').textContent = this.formatNumber(this.state.food);
                document.getElementById('cultureValue').textContent = this.formatNumber(this.state.culture);
                document.getElementById('happinessValue').textContent = `${Math.round(this.state.happiness)}%`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
                document.getElementById('scienceValue').textContent = this.formatNumber(this.state.science);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —Å—á–∞—Å—Ç—å—è
                const happinessBar = document.querySelector('#happinessValue').parentElement.nextElementSibling;
                if (happinessBar && happinessBar.querySelector('.progress-fill')) {
                    happinessBar.querySelector('.progress-fill').style.width = `${this.state.happiness}%`;
                }
            }
            
            // –ü–û–ö–ê–ó –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
            showNotification(text) {
                const notification = document.getElementById('notification');
                const notificationText = document.getElementById('notificationText');
                
                notificationText.textContent = text;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // –í–û–°–ü–†–û–ò–ó–í–ï–î–ï–ù–ò–ï –ó–í–£–ö–ê
            playSound(soundId) {
                if (!this.state.soundEnabled) return;
                
                const audio = document.getElementById(soundId);
                if (audio) {
                    audio.currentTime = 0;
                    audio.play().catch(e => console.log('–ó–≤—É–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω:', e));
                }
            }
            
            // –ü–û–ö–ê–ó –¢–£–¢–û–†–ò–ê–õ–ê
            showTutorial() {
                document.getElementById('tutorialScreen').style.display = 'flex';
            }
            
            // –ù–ê–ß–ê–õ–û –¢–£–¢–û–†–ò–ê–õ–ê
            startTutorial() {
                this.state.tutorialCompleted = true;
                document.getElementById('tutorialScreen').style.display = 'none';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ
                this.showNotification('üéì –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –æ–±—É—á–µ–Ω–∏–µ!');
                this.addEvent('üìö –ù–∞—á–∞—Ç–æ –æ–±—É—á–µ–Ω–∏–µ –∏–≥—Ä–µ. –°–ª–µ–¥—É–π—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º.', 'success');
                
                // –ü–æ—à–∞–≥–æ–≤—ã–π —Ç—É—Ç–æ—Ä–∏–∞–ª
                setTimeout(() => {
                    this.showNotification('1. –°–æ–±–∏—Ä–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã - –æ–Ω–∏ —Ä–∞—Å—Ç—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏');
                }, 1000);
                
                setTimeout(() => {
                    this.showNotification('2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–∏');
                }, 4000);
                
                setTimeout(() => {
                    this.showNotification('3. –ò—Å—Å–ª–µ–¥—É–π—Ç–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π');
                }, 7000);
                
                setTimeout(() => {
                    this.showNotification('4. –û—Å–Ω–æ–≤–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –≥–æ—Ä–æ–¥–∞ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è');
                }, 10000);
                
                setTimeout(() => {
                    this.showNotification('üéÆ –û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –£–¥–∞—á–∏ –≤ –∏–≥—Ä–µ!');
                }, 13000);
            }
            
            // –°–û–•–†–ê–ù–ï–ù–ò–ï –ò–ì–†–´
            saveGame() {
                try {
                    const saveData = {
                        state: this.state,
                        timestamp: Date.now()
                    };
                    localStorage.setItem('civilization_save', JSON.stringify(saveData));
                    console.log('üíæ –ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', e);
                }
            }
            
            // –ó–ê–ì–†–£–ó–ö–ê –ò–ì–†–´
            loadGame() {
                try {
                    const saved = localStorage.getItem('civilization_save');
                    if (saved) {
                        const saveData = JSON.parse(saved);
                        Object.assign(this.state, saveData.state);
                        console.log('üìÇ –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                        this.updateUI();
                        this.addEvent('üìÇ –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'success');
                    }
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', e);
                }
            }
            
            // –ó–ê–ö–†–´–¢–ò–ï –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê
            closeModal(modalId) {
                document.getElementById(modalId).classList.remove('active');
                this.playSound('click');
            }
            
            // –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ú–ï–¢–û–î–´
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø–ª–∞—Ç—ã
            canAfford(cost) {
                return Object.entries(cost).every(([resource, amount]) => 
                    this.state[resource] >= amount
                );
            }
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
            formatNumber(num) {
                if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
                if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
                return Math.round(num).toString();
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞
            getRandomResource() {
                const resources = ['gold', 'food', 'production', 'science'];
                return resources[Math.floor(Math.random() * resources.length)];
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —Ä–µ—Å—É—Ä—Å–∞
            getResourceName(resource) {
                const names = {
                    'gold': '–ó–æ–ª–æ—Ç–æ',
                    'food': '–ü–∏—â–∞',
                    'production': '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ',
                    'science': '–ù–∞—É–∫–∞'
                };
                return names[resource] || resource;
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏—Ä–æ—Å—Ç–∞ —Ä–µ—Å—É—Ä—Å–∞ –∑–∞ —Ö–æ–¥
            getResourcePerTurn(resource) {
                const rates = {
                    'population': Math.floor(this.state.population * 0.02),
                    'gold': Math.floor(this.state.gold * 0.05),
                    'production': Math.floor(this.state.production * 0.03),
                    'science': Math.floor(this.state.science * 0.04),
                    'food': Math.floor(this.state.food * 0.03),
                    'culture': Math.floor(this.state.culture * 0.02),
                    'happiness': 0
                };
                return rates[resource] || 0;
            }
            
            // –ù–ê–°–¢–†–û–ô–ö–ê –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í –°–û–ë–´–¢–ò–ô
            setupEventListeners() {
                // –ê—É–¥–∏–æ –∫–æ–Ω—Ç—Ä–æ–ª—ã
                document.getElementById('musicToggle').addEventListener('click', () => {
                    this.state.musicEnabled = !this.state.musicEnabled;
                    const music = document.getElementById('backgroundMusic');
                    const btn = document.getElementById('musicToggle');
                    
                    if (this.state.musicEnabled) {
                        music.play();
                        btn.innerHTML = '<i class="fas fa-music"></i>';
                        btn.title = '–í—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É';
                    } else {
                        music.pause();
                        btn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                        btn.title = '–í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É';
                    }
                    this.playSound('click');
                });
                
                document.getElementById('soundToggle').addEventListener('click', () => {
                    this.state.soundEnabled = !this.state.soundEnabled;
                    const btn = document.getElementById('soundToggle');
                    
                    if (this.state.soundEnabled) {
                        btn.innerHTML = '<i class="fas fa-volume-up"></i>';
                        btn.title = '–í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫–∏';
                    } else {
                        btn.innerHTML = '<i class="fas fa-volume-off"></i>';
                        btn.title = '–í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫–∏';
                    }
                    this.playSound('click');
                });
                
                // –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞
                const music = document.getElementById('backgroundMusic');
                music.volume = 0.3;
                if (this.state.musicEnabled) {
                    music.play().catch(e => console.log('–ú—É–∑—ã–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞:', e));
                }
                
                // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                window.game = this;
                window.closeModal = (modalId) => this.closeModal(modalId);
                window.showTutorial = () => this.showTutorial();
                window.startTutorial = () => this.startTutorial();
                window.saveGame = () => {
                    this.saveGame();
                    this.showNotification('üíæ –ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
                };
                window.exploreNewTerritory = () => this.exploreNewTerritory();
                window.foundNewCity = () => this.foundNewCity();
            }
        }

        // –ó–ê–ü–£–°–ö –ò–ì–†–´
        document.addEventListener('DOMContentLoaded', () => {
            // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∏–≥—Ä—ã
            const game = new CivilizationGame();
            
            // –î–µ–ª–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º
            window.game = game;
        });
    </script>
</body>
</html>